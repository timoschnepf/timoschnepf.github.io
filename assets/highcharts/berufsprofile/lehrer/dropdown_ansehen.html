<!DOCTYPE html>
<html>
<head>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/full-screen.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
</head>
<body>

<!-- Dropdown for selecting different job categories -->
<select id="berufSelect" onchange="updateChart()">
    <option value="beruf1">Gesamtschullehrer</option>
    <option value="beruf2">Hauptschullehrer</option>
    <option value="beruf3">Realschullehrer</option>
    <option value="beruf4">Gymnasiallehrer</option>
</select>

<div id="container" style="width:100%; height:400px;"></div>

<script type="text/javascript">

// Function to update the chart based on dropdown selection
function updateChart() {
    const selectedBeruf = document.getElementById('berufSelect').value;

    let chartOptions;
    let berufLabel;

    // Handle the case for each beruf option
    if (selectedBeruf === 'beruf1') {
        berufLabel = 'Gesamtschullehrer';
        chartOptions = {
            title: {
                text: ''
            },
            xAxis: {
                categories: ['Gesamtschullehrer', 'Alle akad. Berufe']
            },
            series: [{
                name: berufLabel,
                data: [6.35, 6.38]  // Fictional data
            }]
        };
    } else if (selectedBeruf === 'beruf2') {
        berufLabel = 'Hauptschullehrer';
        chartOptions = {
            title: {
                text: ''
            },
            xAxis: {
                categories: ['Hauptschullehrer', 'Alle akad. Berufe']
            },
            series: [{
                name: berufLabel,
                data: [5.54, 6.38]  // Fictional data
            }]
        };
    } else if (selectedBeruf === 'beruf3') {
        berufLabel = 'Realschullehrer';
        chartOptions = {
            title: {
                text: ''
            },
            xAxis: {
                categories: ['Realschullehrer', 'Alle akad. Berufe']
            },
            series: [{
                name: berufLabel,
                data: [6.38, 6.38]  // Fictional data
            }]
        };
    } else if (selectedBeruf === 'beruf4') {
        berufLabel = 'Gymnasiallehrer';
        chartOptions = {
            title: {
                text: ''
            },
            xAxis: {
                categories: ['Gymnasiallehrer', 'Alle akad. Berufe']
            },
            series: [{
                name: berufLabel,
                data: [6.75, 6.38]  // Fictional data
            }]
        };
    }

    // Check if chartOptions is defined
    if (chartOptions) {
        // Initialize or update the chart
        Highcharts.chart('container', {
            chart: {
                type: 'bar',
		backgroundColor: '#F7F7F7'
            },
            title: chartOptions.title,
            credits: {
                enabled: false
            },
            exporting: {
                enabled: true,
                buttons: {
                    contextButton: {
                        menuItems: [
                            'viewFullscreen',
                            'separator',
                            'viewData',
                            'downloadCSV',
                            'downloadXLS',
                            'separator',
                            'downloadPNG',
                            'downloadPDF',
                            'downloadSVG',
                        ]
                    }
                }
            },
            xAxis: {
                categories: chartOptions.xAxis.categories
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Mittelwert',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                formatter: function() {
                    return `<span style="font-size:10px;">Einzelberuf</span><br>
                            <b>${berufLabel}</b><br/><br>
                            Das durchschnittliche Ansehen f√ºr<br>
                            "${this.x}" hatte <br>
                            2018 einen <b>Wert von ${this.y}</b>.`;
                }
            },
            legend: {
                enabled: false  // Disable the legend
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            series: chartOptions.series
        });
    }
}

// Initial chart display when the page loads
updateChart();

</script>

</body>
</html>
