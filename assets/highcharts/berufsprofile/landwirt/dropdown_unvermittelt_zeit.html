<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/modules/full-screen.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
</head>
<body>

<!-- Dropdown for selecting different professions -->
<select id="professionSelect" onchange="updateChart()">
    <option value="beruf1">Landwirt/-in</option>
    <option value="beruf2">Fachkraft Agrarservice</option>
</select>

<div id="container" style="width:100%; height:400px;"></div>

<script type="text/javascript">
let chart;  // Variable to hold the chart instance

// Function to update the chart based on dropdown selection
function updateChart() {
    const selectedProfession = document.getElementById('professionSelect').value;

    let chartData;
    let averageData = {
        name: 'Durchschnitt aller Ausbildungsberufe',
        data: [13.7, 13.5, 13.4, 13.4, 13.3, 12.9, 12.3, 14.3, 12.5, 11.3, 11.5]  // Example values for the average
    };

    // Update data based on selected profession
    if (selectedProfession === 'beruf1') {
        chartData = {
            name: 'Landwirt/-in',
            data: [3.63, 3.77, 3.79, 4.27, 4.31, 4.12, 3.83, 4.58, 4.42, 4.72, 3.84]  // Example values
        };
    } else if (selectedProfession === 'beruf2') {
        chartData = {
            name: 'Fachkraft Agrarservice',
            data: [11.11, 12.97, 10.75, 12.78, 10.19, 10.97, 9.88, 9.94, 10.4, 10.82, 12.15]  // Example values
        };
    
    }

    // Update chart series data dynamically
    chart.series[0].update({
        name: chartData.name,
        data: chartData.data
    });

    chart.series[1].update({
        name: averageData.name,
        data: averageData.data
    });
}

// Initialize the chart on page load
chart = Highcharts.chart('container', {
    chart: {
        backgroundColor: '#f7f7f7'
    },
    title: {
        text: ' '
    },
    credits: {
        enabled: false
    },
    exporting: {
        enabled: true,
        buttons: {
            contextButton: {
                menuItems: [
                    'viewFullscreen',
                    'separator',
                    'viewData',
                    'downloadCSV',
                    'downloadXLS',
                    'separator',
                    'downloadPNG',
                    'downloadPDF',
                    'downloadSVG',
                ]
            }
        }
    },
    xAxis: {
        categories: ['2013', '2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023']  // Example years
    },
    yAxis: {
        title: {
            text: ''
        },
        labels: {
            formatter: function() {
                return Highcharts.numberFormat(this.value, 0, ',', '.');  // Formatting
            }
        }
    },
   tooltip: {
    shared: true,
    useHTML: true,
    formatter: function() {
        return `
        <span style="font-size:10px;">Ausbildung</span><br>
        <b>${this.points[0].series.name}</b><br/><br>
        Jahr: ${this.x}<br/>
        Unbesetzte Stellen: <b>${this.points[0].y !== null ? this.points[0].y + ' %' : 'N/A'}</b><br/>
        Durchschnitt aller Ausbildungen: <b>${this.points[1].y !== null ? this.points[1].y + ' %' : 'N/A'}</b><br/>`;
    }
},
series: [{
        name: 'Landwirt/-in',  // Default profession on page load
        data: [3.63, 3.77, 3.79, 4.27, 4.31, 4.12, 3.83, 4.58, 4.42, 4.72, 3.84]
    }, {
        name: 'Durchschnitt aller Ausbildungsberufe',  // Default average on page load
        data: [13.7, 13.5, 13.4, 13.4, 13.3, 12.9, 12.3, 14.3, 12.5, 11.3, 11.5],
        dashStyle: 'Dash'  // Dashed line for average
    }]
});

// Call updateChart to initialize the chart based on the default dropdown selection
updateChart();
</script>

</body>
</html>
